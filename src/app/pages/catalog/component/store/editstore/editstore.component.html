<div class="page-title d-flex flex-wrap me-3 flex-column justify-content-center">
    <h1 class="page-heading d-flex text-dark fw-bold fs-3 my-0 flex-column justify-content-center pb-5">Edit Store</h1>
  </div>
<div class="card mb-5 mb-xl-10">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body pt-1 pb-5">
        <form class="form-group" [formGroup]="formData" (ngSubmit)="saveUser()">
          <div class="row my-3">
            <div class="col-sm-12">
              <h4 class="card-title mb-4">Basic Details</h4>
            </div>
          </div>
          <div class="row" *ngIf="!edit"></div>

          <div class="row">
            <!-- first name -->
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Store Name</label>
              <input
                class="form-control"
                placeholder="Enter name"
                type="text"
                name="name"
                autocomplete="off"
                
                formControlName="name"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['name']?.errors) || (form['name']?.invalid && (form['name']?.dirty || form['name']?.touched))
                }"
              />

              <div
                *ngIf="(submit && form['name']?.errors) || (form['name']?.invalid && (form['name']?.dirty || form['name']?.touched))"
                class="invalid-feedback"
              >
                <span *ngIf="form['name'].errors?.['required']">Enter valid name</span>
                <span *ngIf="form['name'].errors?.['minlength']">Minimum Length 3 Characters.</span>
              </div>
            </div>
            <!-- Last Name -->
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Mobile </label>
              <input
                class="form-control"
                placeholder="Enter Phone"
                type="text"
                name="mobile"
                autocomplete="off"
                formControlName="mobile"
                maxLength="10"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['mobile']?.errors) || (form['mobile']?.invalid && (form['mobile']?.dirty || form['mobile']?.touched))
                }"
              />

              <div
                *ngIf="
                  (submit && form['mobile']?.errors) || (form['mobile']?.invalid && (form['mobile']?.dirty || form['mobile']?.touched))
                "
                class="invalid-feedback"
              >
                <span *ngIf="form['mobile'].errors">Enter valid mobile</span>
              </div>
            </div>
            <!-- <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label fs-6 fw-semibold mb-2">GST Number</label>
              <input class="form-control text-uppercase" placeholder="Enter GST number" type="text" name="gstin" autocomplete="off"
                formControlName="gstin" [ngClass]="{
                  'is-invalid':
                    (submit && form['gstin']?.errors) ||
                    (form['gstin']?.invalid && (form['gstin']?.dirty || form['gstin']?.touched))
                }" />

              <div *ngIf="
                  (submit && form['gstin']?.errors) ||
                  (form['gstin']?.invalid && (form['gstin']?.dirty || form['gstin']?.touched))
                " class="invalid-feedback">
                <span *ngIf="form['gstin'].errors">Enter valid GST Number</span>
              </div>
            </div> -->
          </div>

          <div class="row mt-3">
            <div class="col-sm-12">
              <h4 class="card-title mb-4">Address Details</h4>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Address </label>
              <textarea
                class="form-control"
                placeholder="Enter address"
                type="text"
                name="address"
                autocomplete="off"
                formControlName="address"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['address']?.errors) ||
                    (form['address']?.invalid && (form['address']?.dirty || form['address']?.touched))
                }"
              ></textarea>

              <div
                *ngIf="
                  (submit && form['address']?.errors) || (form['address']?.invalid && (form['address']?.dirty || form['address']?.touched))
                "
                class="invalid-feedback"
              >
                <span *ngIf="form['address'].errors?.['required']">Enter valid address</span>
                <span *ngIf="form['address'].errors?.['minlength']">Minimum Length 3 Characters.</span>
              </div>
            </div>
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Address 1</label>
              <input
                class="form-control"
                placeholder="Enter address"
                type="text"
                name="address1"
                autocomplete="off"
                formControlName="address1"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['address1']?.errors) ||
                    (form['address1']?.invalid && (form['address1']?.dirty || form['address1']?.touched))
                }"
              />

              <div
                *ngIf="
                  (submit && form['address1']?.errors) ||
                  (form['address1']?.invalid && (form['address1']?.dirty || form['address1']?.touched))
                "
                class="invalid-feedback"
              >
                <span *ngIf="form['address1'].errors?.['required']">Enter valid address</span>
                <span *ngIf="form['address1'].errors?.['minlength']">Minimum Length 3 Characters.</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Address 2</label>
              <select
              class="form-control"
              type="text"
              name="address2"
              formControlName="address2"
              [ngClass]="{
                'is-invalid':
                  (submit && form['address2']?.errors) ||
                  (form['address2']?.invalid && (form['address2']?.dirty || form['address2']?.touched))
              }"

              (change)="getstatename($event)"
            >
              <option *ngFor="let stat of states" [value]="stat.name">{{ stat.name }}</option>
            </select>

              <div
                *ngIf="
                  (submit && form['address2']?.errors) || (form['address2']?.invalid && (form['address2']?.dirty || form['address2']?.touched))
                "
                class="invalid-feedback"
              >
                <span *ngIf="form['address2'].errors?.['required']">Enter valid address</span>
              
              </div>
            </div>
            <div cont class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Store Live Location</label>
              <input
                class="form-control"
                placeholder="Enter address"
                type="text"
                name="map"
                autocomplete="off"
                formControlName="map"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['map']?.errors) ||
                    (form['map']?.invalid && (form['map']?.dirty || form['map']?.touched))
                }"
              />

              <div
                *ngIf="
                  (submit && form['map']?.errors) ||
                  (form['map']?.invalid && (form['map']?.dirty || form['map']?.touched))
                "
                class="invalid-feedback"
              >
                <span *ngIf="form['map'].errors?.['required']">Enter valid address</span>
                <span *ngIf="form['map'].errors?.['minlength']">Minimum Length 3 Characters.</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
              <label class="form-label required fs-6 fw-semibold required mb-2">Zipcode </label>
              <input
                class="form-control"
                placeholder="Enter Phone"
                type="text"
                name="pincode"
                autocomplete="off"
                formControlName="pincode"
                (keypress)="($event.charCode >= 48 && $event.charCode < 58)"
                maxLength="10"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['pincode']?.errors) || (form['pincode']?.invalid && (form['pincode']?.dirty || form['pincode']?.touched))
                }"
              />

              <div
                *ngIf="
                  (submit && form['pincode']?.errors) || (form['pincode']?.invalid && (form['pincode']?.dirty || form['pincode']?.touched))
                "
                class="invalid-feedback"
              >
                <span *ngIf="form['pincode'].errors">Enter valid Zipcode</span>
              </div>
            </div>
            <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
                <label class="form-label required fs-6 fw-semibold mb-2">Store Image</label>
                <input class="form-control" placeholder="Select image" type="file" name="image" autocomplete="off"
                 formControlName="image" maxLength="10" (change)="onFileSelected($event)"
                   />

                  <img src="{{data.image}}" alt="fashionwrap"  width="100" height="100">
                <!-- <div *ngIf="
                    (submit && form['image']?.errors) ||
                    (form['image']?.invalid && (form['image']?.dirty || form['image']?.touched))
                  " class="invalid-feedback">
                  <span *ngIf="form['image'].errors">Select valid image</span>
                </div> -->
              </div>
          </div>
          <div class="row">
          <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container"  *ngIf="!showimage">
            <label class="form-label required fs-6 fw-semibold mb-2">State image </label>
            <input
              class="form-control"
              placeholder="Select image"
              type="file"
              name="state_image"
              autocomplete="off"
              formControlName="state_image"
              maxLength="10"
              (change)="onStateFileSelected($event)"
              
            />

            <img src="{{data.state_image}}" alt="fashionwrap"  width="100" height="100">
          </div>
          <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
            <label class="form-label required fs-6 fw-semibold required mb-2">Store Slug</label>
            <input
              class="form-control"
              placeholder="Enter Slug"
              type="text"
              name="slug"
              autocomplete="off"
              
              formControlName="slug"
              [ngClass]="{
                'is-invalid':
                  (submit && form['slug']?.errors) || (form['slug']?.invalid && (form['slug']?.dirty || form['slug']?.touched))
              }"
            />

            <div
              *ngIf="(submit && form['slug']?.errors) || (form['slug']?.invalid && (form['slug']?.dirty || form['slug']?.touched))"
              class="invalid-feedback"
            >
              <span *ngIf="form['slug'].errors?.['required']">Enter valid slug</span>
              <span *ngIf="form['slug'].errors?.['minlength']">Minimum Length 3 Characters.</span>
            </div>
          </div>
          <div class="col-sm-6 mb-3 fv-row fv-plugins-icon-container">
            <label class="form-label required fs-6 fw-semibold required mb-2">Status </label>
             
              <select
                class="form-control"
                name="status"
                formControlName="status"
                [ngClass]="{
                  'is-invalid':
                    (submit && form['status']?.errors) || (form['status']?.invalid && (form['status']?.dirty || form['status']?.touched))
                }"
              >
                <option *ngFor="let stat of statuses" [value]="stat.id">{{ stat.name }}</option>
              </select>
            
            <div
              *ngIf="
                (submit && form['status']?.errors) || (form['status']?.invalid && (form['status']?.dirty || form['status']?.touched))
              "
              class="invalid-feedback"
            >
              <span *ngIf="form['status'].errors?.['required']">Enter valid status</span>
            </div>
          </div>
          </div>
          <div class="mt-6">
            <div class="text-sm-end">
              <a [routerLink]="['/catalog/stores']" class="btn btn-sm btn-secondary me-4">Cancel</a>
              <button type="submit" class="btn btn-sm btn-primary">Save</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
